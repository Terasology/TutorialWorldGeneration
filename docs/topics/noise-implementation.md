# Implementation

This page explains the detailed implementation and paremeters of `BrownianNoise` and `SubSampledNoise`, covering their mechanics and usages.

### BrownianNoise

For `BrownianNoise`, in this tutorial, we use it to create mountains. We use it to overlay different layers of noise and to adjust the octave. Code sample from this tutorial's mountains terrain: 

```java
@Override
public void setSeed(long seed) {
    terrainNoise = new SubSampledNoise(new BrownianNoise(new PerlinNoise(seed + 2), 8), new Vector2f(0.001f, 0.001f), 1);
}
```
Parameters of BrownianNoise: 
```java
BrownianNoise(Noise other, int octaves)
```

For the mountains terrain in this tutorial, the `other` is set to `new PerlinNoise(seed + 2)`. The octave is `8`. Let's change the octave to 4 and see what will happen?

<fig src="_media/img/brownianPerlinOctave4.png" alt="Brownian noise with octave 4">Layered Brownian noise with 4 octaves.</fig>

The mountains are more rounded and also the gaps (valleys) between each one are wider. It seems like it has less details and the mountains are more spread.

<fig src="_media/img/brownianPerlinOctave8.png" alt="Brownian noise with octave 4">Layered Brownian noise with 8 octaves viewed from the same position.</fig>

`octaves` is used to determine how many noise functions are added together to form 1 noise function, in this case `PerlinNoise`. The number of octaves control the amount of detail of `PerlinNoise`. More octaves, more noise functions added, more details and more calculation.

### SubSampledNoise

This is used to smooth out the noise by "zooming in" or "stretching" the noise values out. You can see its usage in both mountains and rolling hills terrain. Let's take a look at `SubSampledNoise` - its parameters and their usages.

```java
SubSampledNoise(Noise source, Vector3f zoom, int sampleRate)
```

The `source` is the noise generator. For example, in the mountains terrain, we use `new BrownianNoise(new PerlinNoise(seed + 2), 8)`. The `zoom` is `0.001f, 0.001f, 1f` - default value for z axis is 1 as noise map is 2D. The `sampleRate` is `1`.

The `zoom` is used to zoom in/out the noise map and to adjust noise's frequency. Let's take a look at some examples - we're still using mountain terrains as examples for clearer images.

<fig src="_media/img/NoiseMapZoom0.001.png" alt="zoom of 0.001">The Noise Map for the second terrain which uses `0.001f, 0.001f, 1f` as `zoom`.</fig>

<fig src="_media/img/NoiseMapZoom0.01.png" alt="zoom of 0.01">The Noise Map of a terrain which uses `0.01f, 0.01f, 1f` as `zoom`.</fig>

As you can see, the first Noise Map is like a zoom in version of the second one - bigger bright and dark area. That means in the same given area, the second one will produce more mountains but with fewer details.

<fig src="_media/img/NoiseZoom0.01.png" alt="terrain with zoom of 0.01">A world generated from a noise map with `0.01f, 0.01f, 1f` as `zoom`.</fig>

This is the terrain generated by the second Noise Map. It is nice. The difference between the two is the mountains here are smaller and steeper than the first one because of more bright and dark area per the same given area. More frequency, less wavelength, same amplitude.

The result can be extreme. Below is a terrain which uses `0.1f, 0.1f, 1f` as `zoom`.

<fig src="_media/img/NoiseZoom0.1.png" alt="terrain with zoom of 0.1">A world generated from a noise map with `0.1f, 0.1f, 1f` as `zoom`. There are a lot of mountains and peaks in this picture more than any others in this page combined.</fig>


> [!INFO]
> You can play around with the `zoom` in the configuration menu of mountains (added in this tutorial repo). Ratio of 1 has the `zoom` of `0.01f`, lowest ratio is `0.1f` with the `zoom` of `0.001f`.*